<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="reservationns">
	
	<!-- 타세요 상세보기에서 신청버튼 클릭시  -->
	<insert id="insert" parameterType="reservation">
		insert into reservation values
		((SELECT NVL(MAX(RSV_num), 0) + 1 as RSV_num FROM reservation), 'Y', 'N', #{MB_num}, #{CP_num})
	</insert>
	
	<select id="reservationList" parameterType="reservation" resultType="reservation">
		select * from reservation where CP_num=#{CP_num} order by RSV_num
		<!-- select * from (select a.*, rowNum rn from (select * from reservation where CP_num=#{CP_num}
		order by RSV_num desc) a) where rn between #{startRow} and #{endRow} -->
	</select>
	
	<select id="getTotal" parameterType="reservation" resultType="integer">
		select count(*) from reservation
	</select>

</mapper>