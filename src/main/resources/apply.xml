<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="applyns">
	<select id="getApplyTotal" parameterType="apply" resultType="integer">
		select count(*) from apply
	</select>
	<select id="applyList" parameterType="apply" resultType="apply">
		select * from (select a.*, rowNum rn from (select ap.*, m.MB_id, m.MB_name, m.MB_gender, m.MB_driverConfirm
						from apply ap, member m where ap.MB_num=m.MB_num
			<where>
				<if test="keyword!=null and keyword!=''">
					<!-- <if test="search=='subcon'">
						NT_title like '%' || #{keyword} || '%' or
						NT_content like '%' || #{keyword} || '%'
					</if> -->
					<if test="search!='subcon'">
						${search} like '%' || #{keyword} || '%'
					</if>
				</if>
			</where>
			order by AP_num desc) a)
			where rn between #{startRow} and #{endRow}
	</select>
</mapper>